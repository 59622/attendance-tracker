{"ast":null,"code":"import React,{useState,useEffect}from'react';import{attendanceAPI}from'../services/api';import AttendanceCard from'../pages/AttendanceCard';import SearchFilter from'../pages/SearchFilter';import{jsx as _jsx,jsxs as _jsxs}from\"react/jsx-runtime\";const AttendanceDashboard=()=>{const[records,setRecords]=useState([]);const[loading,setLoading]=useState(true);const[error,setError]=useState('');const[filters,setFilters]=useState({});const loadRecords=async function(){let filterParams=arguments.length>0&&arguments[0]!==undefined?arguments[0]:{};try{setLoading(true);const response=await attendanceAPI.getFiltered(filterParams);setRecords(response.data.data);setError('');}catch(err){setError('Failed to load attendance records');console.error('Error loading records:',err);}finally{setLoading(false);}};useEffect(()=>{loadRecords(filters);},[filters]);const handleFilterChange=newFilters=>{setFilters(newFilters);};const handleClearFilters=()=>{setFilters({});};const handleDeleteRecord=async id=>{try{await attendanceAPI.delete(id);loadRecords(filters);}catch(err){setError('Failed to delete record');console.error('Error deleting record:',err);}};const stats={total:records.length,present:records.filter(r=>r.status==='Present').length,absent:records.filter(r=>r.status==='Absent').length};return/*#__PURE__*/_jsxs(\"div\",{className:\"attendance-dashboard\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stats-container\",children:[/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card total\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Total Records\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:stats.total})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card present\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Present\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:stats.present})]}),/*#__PURE__*/_jsxs(\"div\",{className:\"stat-card absent\",children:[/*#__PURE__*/_jsx(\"h3\",{children:\"Absent\"}),/*#__PURE__*/_jsx(\"span\",{className:\"stat-number\",children:stats.absent})]})]}),/*#__PURE__*/_jsx(SearchFilter,{filters:filters,onFilterChange:handleFilterChange,onClearFilters:handleClearFilters}),loading&&/*#__PURE__*/_jsx(\"div\",{className:\"loading\",children:\"Loading attendance records...\"}),error&&/*#__PURE__*/_jsx(\"div\",{className:\"error-message\",children:error}),!loading&&/*#__PURE__*/_jsxs(\"div\",{className:\"records-container\",children:[/*#__PURE__*/_jsxs(\"h3\",{children:[\"Attendance Records (\",records.length,\")\"]}),records.length===0?/*#__PURE__*/_jsx(\"div\",{className:\"no-records\",children:\"No attendance records found\"}):/*#__PURE__*/_jsx(\"div\",{className:\"records-grid\",children:records.map(record=>/*#__PURE__*/_jsx(AttendanceCard,{record:record,onDelete:handleDeleteRecord},record.id))})]})]});};export default AttendanceDashboard;","map":{"version":3,"names":["React","useState","useEffect","attendanceAPI","AttendanceCard","SearchFilter","jsx","_jsx","jsxs","_jsxs","AttendanceDashboard","records","setRecords","loading","setLoading","error","setError","filters","setFilters","loadRecords","filterParams","arguments","length","undefined","response","getFiltered","data","err","console","handleFilterChange","newFilters","handleClearFilters","handleDeleteRecord","id","delete","stats","total","present","filter","r","status","absent","className","children","onFilterChange","onClearFilters","map","record","onDelete"],"sources":["C:/Users/IT CENTER/attendance-tracker/src/components/AttendanceDashboard.js"],"sourcesContent":["import React, { useState, useEffect } from 'react';\r\nimport { attendanceAPI } from '../services/api';\r\nimport AttendanceCard from '../pages/AttendanceCard';      \r\nimport SearchFilter from '../pages/SearchFilter';         \r\n\r\nconst AttendanceDashboard = () => {\r\n  const [records, setRecords] = useState([]);\r\n  const [loading, setLoading] = useState(true);\r\n  const [error, setError] = useState('');\r\n  const [filters, setFilters] = useState({});\r\n\r\n  const loadRecords = async (filterParams = {}) => {\r\n    try {\r\n      setLoading(true);\r\n      const response = await attendanceAPI.getFiltered(filterParams);\r\n      setRecords(response.data.data);\r\n      setError('');\r\n    } catch (err) {\r\n      setError('Failed to load attendance records');\r\n      console.error('Error loading records:', err);\r\n    } finally {\r\n      setLoading(false);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    loadRecords(filters);\r\n  }, [filters]);\r\n\r\n  const handleFilterChange = (newFilters) => {\r\n    setFilters(newFilters);\r\n  };\r\n\r\n  const handleClearFilters = () => {\r\n    setFilters({});\r\n  };\r\n\r\n  const handleDeleteRecord = async (id) => {\r\n    try {\r\n      await attendanceAPI.delete(id);\r\n      loadRecords(filters);\r\n    } catch (err) {\r\n      setError('Failed to delete record');\r\n      console.error('Error deleting record:', err);\r\n    }\r\n  };\r\n\r\n  const stats = {\r\n    total: records.length,\r\n    present: records.filter(r => r.status === 'Present').length,\r\n    absent: records.filter(r => r.status === 'Absent').length\r\n  };\r\n\r\n  return (\r\n    <div className=\"attendance-dashboard\">\r\n      {/* Statistics Section */}\r\n      <div className=\"stats-container\">\r\n        <div className=\"stat-card total\">\r\n          <h3>Total Records</h3>\r\n          <span className=\"stat-number\">{stats.total}</span>\r\n        </div>\r\n        <div className=\"stat-card present\">\r\n          <h3>Present</h3>\r\n          <span className=\"stat-number\">{stats.present}</span>\r\n        </div>\r\n        <div className=\"stat-card absent\">\r\n          <h3>Absent</h3>\r\n          <span className=\"stat-number\">{stats.absent}</span>\r\n        </div>\r\n      </div>\r\n\r\n      {/* Search and Filter Section */}\r\n      <SearchFilter \r\n        filters={filters}\r\n        onFilterChange={handleFilterChange}\r\n        onClearFilters={handleClearFilters}\r\n      />\r\n\r\n      {/* Loading and Error States */}\r\n      {loading && <div className=\"loading\">Loading attendance records...</div>}\r\n      {error && <div className=\"error-message\">{error}</div>}\r\n\r\n      {/* Records Section */}\r\n      {!loading && (\r\n        <div className=\"records-container\">\r\n          <h3>Attendance Records ({records.length})</h3>\r\n          \r\n          {records.length === 0 ? (\r\n            <div className=\"no-records\">\r\n              No attendance records found\r\n            </div>\r\n          ) : (\r\n            <div className=\"records-grid\">\r\n              {records.map(record => (\r\n                <AttendanceCard \r\n                  key={record.id} \r\n                  record={record} \r\n                  onDelete={handleDeleteRecord}\r\n                />\r\n              ))}\r\n            </div>\r\n          )}\r\n        </div>\r\n      )}\r\n    </div>\r\n  );\r\n};\r\n\r\nexport default AttendanceDashboard;"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}